<?php
   /* Template Name: portfolio page */

    ?>
<!DOCTYPE html>
<html data-wf-page="5eb40071fa63c85922a62789" data-wf-site="5e8b4cfdbb73f603407121d1">
<head>
  <meta charset="utf-8">
  <title>Technologies</title>
  <meta content="On Time And On Budget, Or It’s On Us." name="description">
  <meta content="Technologies" property="og:title">
  <meta content="On Time And On Budget, Or It’s On Us." property="og:description">
  <meta content="Technologies" property="twitter:title">
  <meta content="On Time And On Budget, Or It’s On Us." property="twitter:description">
  <meta property="og:type" content="website">
  <meta content="summary_large_image" name="twitter:card">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="<?php echo get_theme_file_uri(); ?>/assets/css/normalize.css" rel="stylesheet" type="text/css">
  <link href="<?php echo get_theme_file_uri(); ?>/assets/css/components.css" rel="stylesheet" type="text/css">
  <link href="<?php echo get_theme_file_uri(); ?>/assets/css/onestop-b2fbcd.css" rel="stylesheet" type="text/css">
  <link href="<?php echo get_theme_file_uri(); ?>/assets/css/onestop-b2fbcd-product.css" rel="stylesheet" type="text/css">
  <style>@media (min-width:992px) {html.w-mod-js:not(.w-mod-ix) [data-w-id="dd9441a3-1997-af6b-7f7e-0ae5df339b82"] {-webkit-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="f70ff7c1-45db-20b9-bfa2-81154d06c49d"] {-webkit-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="c5775b65-6c0a-ff2d-94b3-8eadb482a0de"] {-webkit-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="37d29402-8767-6202-cf1c-c9342efc42c5"] {-webkit-transform:translate3d(18%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(18%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(18%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(18%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="cf10ba6e-791a-821b-5f88-21c6826cc28e"] {-webkit-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}}@media (max-width:991px) and (min-width:768px) {html.w-mod-js:not(.w-mod-ix) [data-w-id="dd9441a3-1997-af6b-7f7e-0ae5df339b82"] {-webkit-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="f70ff7c1-45db-20b9-bfa2-81154d06c49d"] {-webkit-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="c5775b65-6c0a-ff2d-94b3-8eadb482a0de"] {-webkit-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="37d29402-8767-6202-cf1c-c9342efc42c5"] {-webkit-transform:translate3d(18%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(18%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(18%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(18%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="cf10ba6e-791a-821b-5f88-21c6826cc28e"] {-webkit-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}}@media (max-width:767px) and (min-width:480px) {html.w-mod-js:not(.w-mod-ix) [data-w-id="dd9441a3-1997-af6b-7f7e-0ae5df339b82"] {-webkit-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="f70ff7c1-45db-20b9-bfa2-81154d06c49d"] {-webkit-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="c5775b65-6c0a-ff2d-94b3-8eadb482a0de"] {-webkit-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="37d29402-8767-6202-cf1c-c9342efc42c5"] {-webkit-transform:translate3d(18%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(18%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(18%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(18%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="cf10ba6e-791a-821b-5f88-21c6826cc28e"] {-webkit-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-moz-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);-ms-transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);transform:translate3d(0%, 0%, 0) scale3d(0.7, 0.7, 1) rotateX(0) rotateY(0) rotateZ(26DEG) skew(0, 0);}}</style>
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <!-- <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script> -->
  <link href="<?php echo get_theme_file_uri(); ?>/assets/images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="<?php echo get_theme_file_uri(); ?>/assets/images/webclip.png" rel="apple-touch-icon">
</head>
<body>

<?php

$uploads = wp_upload_dir();
$upload_url = $uploads['baseurl']."/portfolio/";

$upload_path = $uploads['basedir']."/portfolio/";
$base_dir = get_theme_file_uri()."/assets/portfolio/";

$im = imagecreate(500, 400);
//$white = imagecolorallocate($im, 255, 255, 255);

$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 51, 51, 51);
$themePath = get_template_directory()."/assets/images";


if (is_dir($themePath)){
    if ($dh = opendir($themePath)){ 
        
        if( have_rows('portfolio_text') ){
            
            while( have_rows('portfolio_text') ) : the_row();
                $title = get_sub_field('title');
                $description = get_sub_field('description');
                
                if($title == "Profila"){
                    $folder = 'profila';
                    unlink($upload_url.$folder.'/'.$folder.'_'."001.jpg");
                }else if($title == "Profit Drive"){
                    $folder = 'profit-drive';
                    unlink($upload_url.$folder.'/'.$folder.'_'."001.jpg");
                }else if($title == "Target Solar"){
                    $folder = 'target-solar';
                    unlink($upload_url.$folder.'/'.$folder.'_'."001.jpg");
                }
                //$image = imagecreatefromstring(file_get_contents($themePath));
                //closedir($dh);
                $dir = $upload_path.$folder;
        		if (!is_dir($dir)) {
        		    mkdir($dir, 0777, true);
        		}
        		$imageUrl = $upload_url.$folder;
        		$pageImage = get_template_directory()."/assets/images/slider-bg.jpg";
                $font_path = get_template_directory().'/fonts/Montserrat-Medium.ttf';
        		$image1 = imagecreatefromstring(file_get_contents($pageImage));
        		//var_dump(wordwrap(strip_tags($description), 62, "\n", true)); exit;
                if($description != ""){
                    imagettftext($image1, 17, 0, 60, 120, $grey, $font_path, wordwrap(strip_tags($description), 62, "\n", true));
                    //imagettftext($image1, 19, 0, 55, 120, $grey, $font_path, $description);
                	header("Content-Type: image/jpg");
                	imagejpeg($image1, $upload_path.$folder.'/'.$folder.'_'."001.jpg");
                	$newpath = $upload_url.$folder.'/'.$folder.'_'."001.jpg";
                	
                }
            
            
            endwhile;
            echo "Text Update successfully";
        }
    }
};
 exit;
    
?>

<?php get_footer() ?>
